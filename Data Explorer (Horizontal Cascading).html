<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hierarchical Navigation UI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom scrollbar */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background: #cbd5e0;
            border-radius: 3px;
        }
        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: #a0aec0;
        }
        
        /* Fade effect for lazy loading */
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Mobile panel transition */
        .mobile-panel {
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        .mobile-panel.active {
            transform: translateX(0);
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <div class="container mx-auto px-4 py-6">
        <!-- Header with search -->
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
            <div>
                <h1 class="text-2xl font-bold text-gray-800">Data Explorer</h1>
                <div class="flex items-center text-sm text-gray-600 mt-1">
                    <span id="breadcrumbs" class="flex flex-wrap items-center gap-1">
                        <span class="cursor-pointer hover:text-blue-600" data-level="0">Root</span>
                    </span>
                </div>
            </div>
            <div class="w-full md:w-64 relative">
                <input type="text" id="globalSearch" placeholder="Search all levels..." 
                       class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
            </div>
        </div>

        <!-- Recently used section -->
        <div class="mb-8" id="recentSection">
            <h2 class="text-lg font-semibold text-gray-700 mb-3">Recently Accessed</h2>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3">
                <!-- Placeholder recent items -->
                <div class="bg-white p-3 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow cursor-pointer">
                    <div class="text-blue-600 mb-1"><i class="fas fa-folder"></i></div>
                    <div class="text-sm font-medium truncate">Products</div>
                    <div class="text-xs text-gray-500 truncate">Level B</div>
                </div>
                <div class="bg-white p-3 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow cursor-pointer">
                    <div class="text-green-600 mb-1"><i class="fas fa-file-excel"></i></div>
                    <div class="text-sm font-medium truncate">Sales Q1</div>
                    <div class="text-xs text-gray-500 truncate">Level E</div>
                </div>
                <div class="bg-white p-3 rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow cursor-pointer">
                    <div class="text-purple-600 mb-1"><i class="fas fa-database"></i></div>
                    <div class="text-sm font-medium truncate">Inventory</div>
                    <div class="text-xs text-gray-500 truncate">Level C</div>
                </div>
            </div>
        </div>

        <!-- Main navigation panels -->
        <div class="hidden md:flex overflow-x-auto custom-scroll pb-4" id="desktopPanels">
            <!-- Panel A (always visible) -->
            <div class="panel flex-shrink-0 w-64 bg-white rounded-lg shadow-sm border border-gray-200 mr-4" data-level="0">
                <div class="p-3 border-b border-gray-200">
                    <div class="flex justify-between items-center">
                        <h3 class="font-medium text-gray-700">Categories</h3>
                        <div class="relative">
                            <input type="text" placeholder="Filter..." 
                                   class="text-xs pl-7 pr-2 py-1 rounded border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500">
                            <i class="fas fa-search absolute left-2 top-2 text-gray-400 text-xs"></i>
                        </div>
                    </div>
                </div>
                <div class="overflow-y-auto custom-scroll" style="max-height: 60vh;">
                    <ul class="divide-y divide-gray-200" id="panel-0">
                        <!-- Items will be loaded here -->
                    </ul>
                </div>
            </div>
            <!-- Additional panels will be added dynamically -->
        </div>

        <!-- Mobile navigation (stacked panels) -->
        <div class="md:hidden relative overflow-hidden" id="mobilePanels" style="height: 70vh;">
            <!-- Panel A (initial visible panel) -->
            <div class="mobile-panel absolute inset-0 bg-white rounded-lg shadow-sm border border-gray-200 active" data-level="0">
                <div class="p-3 border-b border-gray-200 flex justify-between items-center">
                    <button class="back-button hidden text-gray-500 hover:text-gray-700">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h3 class="font-medium text-gray-700 flex-grow text-center">Categories</h3>
                    <div class="relative w-32">
                        <input type="text" placeholder="Filter..." 
                               class="text-xs pl-7 pr-2 py-1 rounded border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500">
                        <i class="fas fa-search absolute left-2 top-2 text-gray-400 text-xs"></i>
                    </div>
                </div>
                <div class="overflow-y-auto custom-scroll" style="height: calc(100% - 44px);">
                    <ul class="divide-y divide-gray-200" id="mobile-panel-0">
                        <!-- Items will be loaded here -->
                    </ul>
                </div>
            </div>
            <!-- Additional mobile panels will be added dynamically -->
        </div>
    </div>

    <script>
        // Sample data for all levels (in a real app, this would come from an API)
        const sampleData = {
            '0': [
                { id: 'a1', name: 'Products', type: 'folder', count: 1250 },
                { id: 'a2', name: 'Customers', type: 'folder', count: 980 },
                { id: 'a3', name: 'Sales', type: 'folder', count: 750 },
                { id: 'a4', name: 'Inventory', type: 'folder', count: 2100 },
                { id: 'a5', name: 'Employees', type: 'folder', count: 320 },
                { id: 'a6', name: 'Suppliers', type: 'folder', count: 450 },
                { id: 'a7', name: 'Financials', type: 'folder', count: 680 },
                { id: 'a8', name: 'Marketing', type: 'folder', count: 540 }
            ],
            'a1': [
                { id: 'b1', name: 'Electronics', type: 'folder', count: 420 },
                { id: 'b2', name: 'Clothing', type: 'folder', count: 380 },
                { id: 'b3', name: 'Home Goods', type: 'folder', count: 250 },
                { id: 'b4', name: 'Toys', type: 'folder', count: 180 },
                { id: 'b5', name: 'Books', type: 'folder', count: 90 },
                { id: 'b6', name: 'Sports', type: 'folder', count: 120 },
                { id: 'b7', name: 'Automotive', type: 'folder', count: 75 },
                { id: 'b8', name: 'Health', type: 'folder', count: 210 }
            ],
            'b1': [
                { id: 'c1', name: 'Smartphones', type: 'folder', count: 85 },
                { id: 'c2', name: 'Laptops', type: 'folder', count: 72 },
                { id: 'c3', name: 'TVs', type: 'folder', count: 64 },
                { id: 'c4', name: 'Audio', type: 'folder', count: 53 },
                { id: 'c5', name: 'Cameras', type: 'folder', count: 48 },
                { id: 'c6', name: 'Gaming', type: 'folder', count: 39 },
                { id: 'c7', name: 'Wearables', type: 'folder', count: 32 },
                { id: 'c8', name: 'Accessories', type: 'folder', count: 47 }
            ],
            'c1': [
                { id: 'd1', name: 'Apple', type: 'folder', count: 25 },
                { id: 'd2', name: 'Samsung', type: 'folder', count: 22 },
                { id: 'd3', name: 'Google', type: 'folder', count: 12 },
                { id: 'd4', name: 'OnePlus', type: 'folder', count: 10 },
                { id: 'd5', name: 'Xiaomi', type: 'folder', count: 8 },
                { id: 'd6', name: 'Huawei', type: 'folder', count: 6 },
                { id: 'd7', name: 'Sony', type: 'folder', count: 5 },
                { id: 'd8', name: 'Other Brands', type: 'folder', count: 7 }
            ],
            'd1': [
                { id: 'e1', name: 'iPhone 14 Pro', type: 'file', size: '256GB', modified: '2023-05-15' },
                { id: 'e2', name: 'iPhone 14', type: 'file', size: '128GB', modified: '2023-04-20' },
                { id: 'e3', name: 'iPhone 13 Pro', type: 'file', size: '256GB', modified: '2023-03-10' },
                { id: 'e4', name: 'iPhone 13', type: 'file', size: '128GB', modified: '2023-02-28' },
                { id: 'e5', name: 'iPhone SE', type: 'file', size: '64GB', modified: '2023-01-15' },
                { id: 'e6', name: 'iPhone 12 Pro', type: 'file', size: '256GB', modified: '2022-12-05' },
                { id: 'e7', name: 'iPhone 12', type: 'file', size: '128GB', modified: '2022-11-18' },
                { id: 'e8', name: 'iPhone 11', type: 'file', size: '64GB', modified: '2022-10-22' }
            ]
        };

        // Track navigation history
        let navigationHistory = [{ level: '0', name: 'Root' }];
        let currentLevel = '0';
        
        // Initialize the UI
        document.addEventListener('DOMContentLoaded', function() {
            loadPanel('0');
            
            // Set up event listeners
            document.getElementById('globalSearch').addEventListener('input', function(e) {
                // In a real app, this would trigger a search across all levels
                console.log('Searching for:', e.target.value);
            });
            
            // Handle window resize
            window.addEventListener('resize', handleResponsiveLayout);
            handleResponsiveLayout();
        });
        
        // Load data into a panel
        function loadPanel(levelId, append = false) {
            const isMobile = window.innerWidth < 768;
            const panelId = isMobile ? `mobile-panel-${navigationHistory.length - 1}` : `panel-${navigationHistory.length - 1}`;
            const panelElement = document.getElementById(panelId);
            
            if (!panelElement) return;
            
            // Show loading state
            panelElement.innerHTML = '<li class="py-3 px-4 text-center text-gray-500">Loading...</li>';
            
            // Simulate API delay
            setTimeout(() => {
                const data = sampleData[levelId] || [];
                
                // Clear the panel
                panelElement.innerHTML = '';
                
                if (data.length === 0) {
                    panelElement.innerHTML = '<li class="py-3 px-4 text-center text-gray-500">No items found</li>';
                    return;
                }
                
                // Add items to the panel
                data.forEach((item, index) => {
                    const li = document.createElement('li');
                    li.className = `px-3 py-2 hover:bg-gray-50 cursor-pointer ${index === 0 ? 'fade-in' : ''}`;
                    li.innerHTML = `
                        <div class="flex items-center justify-between">
                            <div class="flex items-center min-w-0">
                                <div class="mr-3 ${item.type === 'folder' ? 'text-blue-500' : 'text-green-500'}">
                                    <i class="fas ${item.type === 'folder' ? 'fa-folder' : 'fa-file'}"></i>
                                </div>
                                <div class="min-w-0">
                                    <div class="text-sm font-medium truncate">${item.name}</div>
                                    <div class="text-xs text-gray-500 truncate">
                                        ${item.type === 'folder' ? `${item.count} items` : `${item.size} â€¢ Modified ${item.modified}`}
                                    </div>
                                </div>
                            </div>
                            ${item.type === 'folder' ? '<i class="fas fa-chevron-right text-gray-400"></i>' : ''}
                        </div>
                    `;
                    
                    // Add click event to navigate deeper
                    if (item.type === 'folder') {
                        li.addEventListener('click', () => {
                            navigateTo(item.id, item.name);
                        });
                    }
                    
                    // Lazy loading effect
                    setTimeout(() => {
                        li.classList.add('fade-in');
                    }, index * 50);
                    
                    panelElement.appendChild(li);
                });
                
                // Update breadcrumbs
                updateBreadcrumbs();
                
                // Handle responsive layout
                handleResponsiveLayout();
                
            }, 300); // Simulated delay
        }
        
        // Navigate to a new level
        function navigateTo(levelId, levelName) {
            // Add to navigation history
            navigationHistory.push({ level: levelId, name: levelName });
            currentLevel = levelId;
            
            // Load the new panel
            if (window.innerWidth >= 768) {
                // Desktop - add a new panel
                addDesktopPanel(levelId);
            } else {
                // Mobile - replace current panel
                addMobilePanel(levelId);
            }
        }
        
        // Add a new panel for desktop view
        function addDesktopPanel(levelId) {
            const desktopPanels = document.getElementById('desktopPanels');
            const panelCount = desktopPanels.children.length;
            
            // Remove any panels beyond the current one
            while (desktopPanels.children.length > panelCount) {
                desktopPanels.removeChild(desktopPanels.lastChild);
            }
            
            // Create new panel
            const panel = document.createElement('div');
            panel.className = 'panel flex-shrink-0 w-64 bg-white rounded-lg shadow-sm border border-gray-200 mr-4';
            panel.dataset.level = panelCount;
            panel.innerHTML = `
                <div class="p-3 border-b border-gray-200">
                    <div class="flex justify-between items-center">
                        <h3 class="font-medium text-gray-700">${navigationHistory[panelCount].name}</h3>
                        <div class="relative">
                            <input type="text" placeholder="Filter..." 
                                   class="text-xs pl-7 pr-2 py-1 rounded border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500">
                            <i class="fas fa-search absolute left-2 top-2 text-gray-400 text-xs"></i>
                        </div>
                    </div>
                </div>
                <div class="overflow-y-auto custom-scroll" style="max-height: 60vh;">
                    <ul class="divide-y divide-gray-200" id="panel-${panelCount}"></ul>
                </div>
            `;
            
            desktopPanels.appendChild(panel);
            
            // Scroll to show the new panel
            desktopPanels.scrollLeft = desktopPanels.scrollWidth;
            
            // Load data into the new panel
            loadPanel(levelId);
        }
        
        // Add a new panel for mobile view
        function addMobilePanel(levelId) {
            const mobilePanels = document.getElementById('mobilePanels');
            const panelCount = navigationHistory.length - 1;
            
            // Create new panel
            const panel = document.createElement('div');
            panel.className = 'mobile-panel absolute inset-0 bg-white rounded-lg shadow-sm border border-gray-200';
            panel.dataset.level = panelCount;
            panel.innerHTML = `
                <div class="p-3 border-b border-gray-200 flex justify-between items-center">
                    <button class="back-button text-gray-500 hover:text-gray-700">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h3 class="font-medium text-gray-700 flex-grow text-center">${navigationHistory[panelCount].name}</h3>
                    <div class="relative w-32">
                        <input type="text" placeholder="Filter..." 
                               class="text-xs pl-7 pr-2 py-1 rounded border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500">
                        <i class="fas fa-search absolute left-2 top-2 text-gray-400 text-xs"></i>
                    </div>
                </div>
                <div class="overflow-y-auto custom-scroll" style="height: calc(100% - 44px);">
                    <ul class="divide-y divide-gray-200" id="mobile-panel-${panelCount}"></ul>
                </div>
            `;
            
            // Add back button functionality
            panel.querySelector('.back-button').addEventListener('click', () => {
                goBack();
            });
            
            mobilePanels.appendChild(panel);
            
            // Hide previous panel and show new one
            const prevPanel = mobilePanels.querySelector(`.mobile-panel[data-level="${panelCount - 1}"]`);
            if (prevPanel) prevPanel.classList.remove('active');
            panel.classList.add('active');
            
            // Load data into the new panel
            loadPanel(levelId);
        }
        
        // Go back in navigation history
        function goBack() {
            if (navigationHistory.length <= 1) return;
            
            navigationHistory.pop();
            currentLevel = navigationHistory[navigationHistory.length - 1].level;
            
            if (window.innerWidth >= 768) {
                // Desktop - remove the last panel
                const desktopPanels = document.getElementById('desktopPanels');
                if (desktopPanels.children.length > 1) {
                    desktopPanels.removeChild(desktopPanels.lastChild);
                }
            } else {
                // Mobile - go back to previous panel
                const mobilePanels = document.getElementById('mobilePanels');
                const currentPanel = mobilePanels.querySelector('.mobile-panel.active');
                const prevPanel = mobilePanels.querySelector(`.mobile-panel[data-level="${navigationHistory.length - 1}"]`);
                
                if (currentPanel) currentPanel.classList.remove('active');
                if (prevPanel) prevPanel.classList.add('active');
                
                // Remove any panels beyond the current one
                const panels = mobilePanels.querySelectorAll('.mobile-panel');
                panels.forEach((panel, index) => {
                    if (index > navigationHistory.length - 1) {
                        mobilePanels.removeChild(panel);
                    }
                });
            }
            
            // Update breadcrumbs
            updateBreadcrumbs();
        }
        
        // Update breadcrumb navigation
        function updateBreadcrumbs() {
            const breadcrumbsElement = document.getElementById('breadcrumbs');
            breadcrumbsElement.innerHTML = '';
            
            navigationHistory.forEach((item, index) => {
                const span = document.createElement('span');
                span.className = 'cursor-pointer hover:text-blue-600';
                if (index === navigationHistory.length - 1) {
                    span.className = 'text-gray-800 font-medium';
                }
                span.textContent = item.name;
                span.addEventListener('click', () => {
                    // Navigate back to this level
                    while (navigationHistory.length > index + 1) {
                        navigationHistory.pop();
                    }
                    currentLevel = item.level;
                    
                    if (window.innerWidth >= 768) {
                        // Desktop - remove extra panels
                        const desktopPanels = document.getElementById('desktopPanels');
                        while (desktopPanels.children.length > index + 1) {
                            desktopPanels.removeChild(desktopPanels.lastChild);
                        }
                    } else {
                        // Mobile - show the correct panel
                        const mobilePanels = document.getElementById('mobilePanels');
                        const panels = mobilePanels.querySelectorAll('.mobile-panel');
                        
                        panels.forEach((panel, panelIndex) => {
                            if (panelIndex <= index) {
                                panel.classList.add('active');
                            } else {
                                panel.classList.remove('active');
                                // Remove panels beyond the current one after animation
                                setTimeout(() => {
                                    if (panelIndex > index) {
                                        mobilePanels.removeChild(panel);
                                    }
                                }, 300);
                            }
                        });
                    }
                    
                    updateBreadcrumbs();
                });
                
                if (index > 0) {
                    breadcrumbsElement.appendChild(document.createTextNode(' / '));
                }
                breadcrumbsElement.appendChild(span);
            });
        }
        
        // Handle responsive layout changes
        function handleResponsiveLayout() {
            const isMobile = window.innerWidth < 768;
            const desktopPanels = document.getElementById('desktopPanels');
            const mobilePanels = document.getElementById('mobilePanels');
            
            if (isMobile) {
                // Switch to mobile view
                desktopPanels.classList.add('hidden');
                mobilePanels.classList.remove('hidden');
                
                // Ensure we have the correct panel structure for mobile
                const mobilePanelCount = mobilePanels.querySelectorAll('.mobile-panel').length;
                if (mobilePanelCount !== navigationHistory.length) {
                    // Rebuild mobile panels based on navigation history
                    mobilePanels.innerHTML = '';
                    
                    navigationHistory.forEach((item, index) => {
                        const panel = document.createElement('div');
                        panel.className = `mobile-panel absolute inset-0 bg-white rounded-lg shadow-sm border border-gray-200 ${index === navigationHistory.length - 1 ? 'active' : ''}`;
                        panel.dataset.level = index;
                        panel.innerHTML = `
                            <div class="p-3 border-b border-gray-200 flex justify-between items-center">
                                <button class="back-button ${index === 0 ? 'hidden' : ''} text-gray-500 hover:text-gray-700">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <h3 class="font-medium text-gray-700 flex-grow text-center">${item.name}</h3>
                                <div class="relative w-32">
                                    <input type="text" placeholder="Filter..." 
                                           class="text-xs pl-7 pr-2 py-1 rounded border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500">
                                    <i class="fas fa-search absolute left-2 top-2 text-gray-400 text-xs"></i>
                                </div>
                            </div>
                            <div class="overflow-y-auto custom-scroll" style="height: calc(100% - 44px);">
                                <ul class="divide-y divide-gray-200" id="mobile-panel-${index}"></ul>
                            </div>
                        `;
                        
                        // Add back button functionality
                        panel.querySelector('.back-button').addEventListener('click', () => {
                            goBack();
                        });
                        
                        mobilePanels.appendChild(panel);
                    });
                    
                    // Load data into the current panel
                    loadPanel(currentLevel);
                }
            } else {
                // Switch to desktop view
                desktopPanels.classList.remove('hidden');
                mobilePanels.classList.add('hidden');
                
                // Ensure we have the correct panel structure for desktop
                const desktopPanelCount = desktopPanels.querySelectorAll('.panel').length;
                if (desktopPanelCount !== navigationHistory.length) {
                    // Rebuild desktop panels based on navigation history
                    desktopPanels.innerHTML = '';
                    
                    navigationHistory.forEach((item, index) => {
                        const panel = document.createElement('div');
                        panel.className = 'panel flex-shrink-0 w-64 bg-white rounded-lg shadow-sm border border-gray-200 mr-4';
                        panel.dataset.level = index;
                        panel.innerHTML = `
                            <div class="p-3 border-b border-gray-200">
                                <div class="flex justify-between items-center">
                                    <h3 class="font-medium text-gray-700">${item.name}</h3>
                                    <div class="relative">
                                        <input type="text" placeholder="Filter..." 
                                               class="text-xs pl-7 pr-2 py-1 rounded border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-500">
                                        <i class="fas fa-search absolute left-2 top-2 text-gray-400 text-xs"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="overflow-y-auto custom-scroll" style="max-height: 60vh;">
                                <ul class="divide-y divide-gray-200" id="panel-${index}"></ul>
                            </div>
                        `;
                        
                        desktopPanels.appendChild(panel);
                    });
                    
                    // Load data into all panels
                    navigationHistory.forEach((item, index) => {
                        if (index === 0) {
                            loadPanel(item.level);
                        } else {
                            // For subsequent panels, we need to load the data that would be shown
                            // based on the previous selection
                            const prevLevel = navigationHistory[index - 1].level;
                            const nextLevel = sampleData[prevLevel]?.[0]?.id;
                            if (nextLevel) {
                                loadPanel(nextLevel);
                            }
                        }
                    });
                    
                    // Scroll to show the last panel
                    setTimeout(() => {
                        desktopPanels.scrollLeft = desktopPanels.scrollWidth;
                    }, 100);
                }
            }
        }
    </script>
</body>
</html>